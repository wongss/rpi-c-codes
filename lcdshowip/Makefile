# Makefile:
# Normally ONLY need to change SRCS and BIN.
# If necessary change CFLAGS, LDFLAGS, LIBS or INC
SRCS    = lcdshowip.c pi2c.c plcd.c plcdlowlevel.c plcdutl.c getipaddr.c
BIN     = lcdshowip
# this setting copied from wiringPi make file
CFLAGS	= $(DEBUG) -Wall $(INC) -Winline -pipe
LDFLAGS	= -L/usr/local/lib
LIBS    = -lwiringPi
INC	    = -I/usr/local/include
CC      = g++
DEBUG	= -O3
# ===============================
# DO NOT change anything below
# Take SRC names and replace .c with .o
OBJS    = $(SRCS:.c=.o)
# Take SRC names and replace .c with .d
DFILES  = $(SRCS:.c=.d)

# all: $(SRC) $(BIN)
	
$(BIN): $(OBJS) 
	$(CC) $(LDFLAGS) $(LIBS) $(OBJS) -o $@

# pull in dependency info for existing .o files generated by gcc -MM ...
-include $(OBJS:.o=.d)

%.o: %.c
	$(CC) -c $(CFLAGS) $*.c -o $*.o
	$(CC) -MM $(CFLAGS) $*.c > $*.d

clean:
	rm -f $(OBJS) $(DFILES) $(BIN)
